#!/usr/bin/env node
'use strict';

process.env.MICRO_APP_VUEPRESS_DIRECT_RUNNING = true;
const yParser = require('yargs-parser');
const argv = yParser(process.argv.slice(2));
const path = require('path');

const { tryRequire, logger } = require('@micro-app/shared-utils');
const MicroAppCLI = tryRequire('@micro-app/cli');
if (!MicroAppCLI) {
    logger.throw("Cannot find module '@micro-app/cli'!");
}

const { service } = MicroAppCLI;

[ 'extends', 'commands' ].forEach(name => {
    service.registerPlugin({
        id: `cli:plugin-extend-vuepress-${name}`,
        link: path.resolve(__dirname, `../src/${name}/index.js`),
    });
});

service.run('vuepress', argv);
